import{W as e,S as n,E as t,C as o,M as s,a,L as l,P as r,G as i,b as c,R as f,c as w,B as u,d as p,e as h,f as g,V as m}from"./vendor.0a197f48.js";const d=new e({antialias:!0});d.setSize(1920,1080),document.getElementById("scene").appendChild(d.domElement);const x=new n,y=new t(d),O=new o("insertion sort"),b=new s({color:0,polygonOffset:!0,polygonOffsetFactor:1,polygonOffsetUnits:1}),M=new a({color:14154864,polygonOffset:!0,polygonOffsetFactor:1,polygonOffsetUnits:1}),z=new a({color:4105983,polygonOffset:!0,polygonOffsetFactor:1,polygonOffsetUnits:1,specular:16777215}),v=new l({color:16777215,linewidth:2}),T=new r(16777215,1,0);T.position.set(200,80,-200),x.add(T);const A=new r(16777215,1,0);A.position.set(200,160,200),x.add(A);const B=[];function F(e,n,t){const o=new u;o.translate(0,.5,0);const s=new p(o),a=new h(o,b),l=new g(s,v);return a.add(l),a.position.x=e,a.position.z=n,a.scale.y=t,{get x(){return a.position.x},set x(e){a.position.x=e},mesh:a,setHighlight:e=>{a.material="active"===e?z:"sorted"===e?M:b,l.visible=null==e}}}const P=[-8,16,0,9,-1,4,5,-3,8,14,20,21,19,17,12,2,11];const I=function(e){const n=[],t=[],o=[];let s=null,a=0;const l=e.length,r=e.map(((e,n)=>({value:e,targetX:n,x:n,boxIndex:n}))),i=r.slice(),c=()=>{n.push(i.map((e=>e.x))),t.push(s),o.push(a)},f=()=>{let e=0;for(let n=0;n<l;n++){const t=(r[n].targetX-r[n].x)/16;r[n].x+=t,e+=Math.abs(t)}return c(),e},w=e=>{for((()=>{for(let e=0;e<l;e++)r[e].targetX=e})();n.length<e;)f()};c();let u=0;const p=()=>{const e=60*++u/108/2/2*60;w(e)},h=e=>{s=r[e].boxIndex;const n=r[e].value;return p(),s=null,n};p();for(let g=1;g<r.length;g++){let e=g;for(a=g;e>0&&!(h(e)<=h(e-1));)[r[e],r[e-1]]=[r[e-1],r[e]],e-=1}for(;f()>1e-4;);return console.log("f",n),o[0]=-1,{applyTo(e,s){const a=Math.max(0,Math.min(n.length-1,e)),l=n[a];s.forEach(((e,n)=>{e.setPosition(l[n]),e.setHighlight(n===t[a]?"active":n<=o[a]?"sorted":null)}))}}}(P),S=P.map(((e,n)=>{const t=.2+(e+10)/32,o=function(e){const n=[],t=O.shuffle(new Array(e-1).fill(0).map(((e,n)=>n+1)));t.push(t.length);const o=new Array(e).fill(0).map(((e,n)=>({value:t[n],targetX:n,x:n}))),s=o.slice(),a=()=>{for(let n=0;n<e;n++)o[n].targetX=n};O.shuffle(o),a();const l=()=>{n.push(s.map((e=>e.x)))};l();const r=()=>{let n=0;for(let t=0;t<e;t++){const e=(o[t].targetX-o[t].x)/32;o[t].x+=e,n+=Math.abs(e)}return l(),n},i=()=>{a();for(let e=0;e<28;e++)r()};for(let c=1;c<o.length;c++){let e=c;for(;e>0&&!(o[e].value>=o[e-1].value);)[o[e],o[e-1]]=[o[e-1],o[e]],e-=1,i()}for(;r()>1e-4;);return{getBoxValue:e=>s[e].value,getBoxPositionAtFrame:(e,t)=>{const o=Math.max(0,Math.min(n.length-1,t));return n[o][e]}}}(16),s=1.41*-(n-8),a=new i;a.position.z=s,a.position.x=-e/256;const l=[];for(let r=0;r<16;r++){const e=o.getBoxValue(r),n=F(0,-e/256,(.75*e+1)*t);B.push((e=>{n.x=1.41*(o.getBoxPositionAtFrame(r,e)-7.5)})),a.add(n.mesh),l.push(n)}return x.add(a),{setPosition:e=>{const n=1.41*-(e-8);a.position.z=n},setHighlight:e=>{l[l.length-1].setHighlight(e)}}}));B.push((e=>{const n=Math.floor(60/108/2*5*4*60);I.applyTo(e-n,S)}));const U=new c(75,1920/1080,.1,1e3),X=new f(x,U);y.addPass(X);const E=function(){const e=[];function n(n,t,o,s,a=t,l=o){let r=t.clone(),i=o.clone();for(let c=0;c<n;c++){r.x+=(a.x-r.x)/s,r.y+=(a.y-r.y)/s,r.z+=(a.z-r.z)/s,i.x+=(l.x-i.x)/s,i.y+=(l.y-i.y)/s,i.z+=(l.z-i.z)/s;const n=r.clone(),t=i.clone();e.push((e=>{e.position.copy(n),e.lookAt(t)}))}}n(150/108*60,new m(0,0,-4),new m(0,3,-12),64,new m(0,12,24)),n(150/108*60,new m(-16,10,8),new m(0,5,0),64,new m(-16,10,-8)),n(150/108*60*2+400,new m(-9,16,-16),new m(-2,7,0),64,new m(22,7,0)),n(400,new m(17,6,16),new m(-16,7,-8),256,new m(20,8,10)),n(400,new m(18,16,-16),new m(0,0,0),256,new m(22,8,10),new m(0,9,0)),n(100,new m(25,8,0),new m(0,7,0),128,new m(18,7,0),new m(0,8,0));const t=new m(2,0,2);return n(100,new m(16,5.5,-14).add(t),new m(-4,5.5,2).add(t),128,new m(16,5.5,-14).sub(t),new m(-4,5.5,2).sub(t)),n(100,new m(7,25,0),new m(2,0,0),128,new m(30,5,0),new m(0,5,0)),n(200,new m(20,6,-4),new m(0,6,-4),256,new m(20,8,4),new m(0,8,4)),n(200,new m(10,7,0),new m(0,7,0),8,new m(22,7,0),new m(0,7,0)),{applyToCamera:(n,t)=>{const o=Math.max(0,Math.min(e.length-1,n));e[o](t)}}}();B.push((e=>{E.applyToCamera(e,U)}));const C=new w(x,U,!1,!0);C.params.output=w.OUTPUT.Default,C.params.saoBias=.9,C.params.saoScale=10,C.params.saoIntensity=.01;let H=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",camera:U,renderAnimation:function(e){for(const n of B)n(e);y.render()}});const _=document.getElementById("audio");function j(e){H.renderAnimation(e)}if(_.src="/insertion-sort-song/assets/isort.678acdc1.mp3",null!=new URLSearchParams(location.search).get("render"))_.hidden=!0,Object.assign(window,{getInfo:()=>({fps:60,numberOfFrames:2400}),seekToFrame:j});else{let e=function(){j(Math.floor(60*(_.currentTime-150/108))),requestAnimationFrame(e)};e()}
